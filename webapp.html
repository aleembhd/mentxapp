<!DOCTYPE html>
<html>
<head>
    <title>StudentConnect - Enhanced Messaging System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/favicon.ico">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <!-- Header -->
    <div class="app-header">
        <div class="header-content">
            <div class="logo-container">
                <div class="gn-logo">GN</div>
                <div class="header-text">GURU NANAK INSTITUTIONS</div>
            </div>
            <div class="programs">
                Engineering • Dental • MBA • MCA • Pharmacy • PGDM
            </div>
        </div>
    </div>
    
    <!-- Section Title -->
    <div class="section-banner">
        <span>(ECE)IIYR - 2nd SEM - SECTION-1</span>
    </div>
    
    <div class="container">
        <!-- Search Container -->
        <div class="search-wrapper">
            <input type="text" id="rollNumber" placeholder="Enter Roll Number">
            <button id="searchBtn" class="search-button">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
        
        <!-- Main Buttons -->
        <div class="main-buttons">
            <button id="allParentsBtn" class="parents-button">
                <i class="fas fa-users"></i> All Parents
            </button>
            <button class="print-button" onclick="openPrintModal()">
                <i class="fas fa-print"></i> Print
            </button>
        </div>
        
        <button class="crs-button" onclick="toggleCRProfiles()">
            <i class="fas fa-phone"></i> Contact CRs
        </button>
        
        <!-- Student Profile Card -->
        <div id="profileCard" class="profile-card" style="display:none;">
            <h2 id="studentName"></h2>
            <p><strong>Roll Number:</strong> <span id="studentRoll"></span></p>
            <p><strong>Email:</strong> <span id="studentEmail"></span></p>
            <p><strong>Parent Name:</strong> <span id="parentName"></span></p>
            <p><strong>Parent Phone:</strong> <span id="parentPhone"></span></p>
            <p><strong>Student Phone:</strong> <span id="studentPhone"></span></p>
            
            <div class="action-buttons">
                <div class="button-row firstflex">
                    <button onclick="callParent()">Call Parent</button>
                    <button onclick="callStudent()">Call Student</button>
                </div>
                <div class="button-row secondflex">
                    <button id="whatsappParentBtn">WhatsApp Parent</button>
                    <button onclick="whatsappStudent()">WhatsApp Student</button>
                </div>
            </div>
            
            <button id="dialNumberBtn" onclick="openDialPad(event)" class="full-width-button">Dial Number</button>
            
            <div id="customMessageArea" style="display:none;">
                <textarea id="customMessageContent" placeholder="Enter your custom message"></textarea>
                <button id="sendCustomMessageBtn">Send WhatsApp Message</button>
            </div>
        </div>
        
        <!-- Message Form -->
        <div id="messageForm" class="message-form" style="display:none;">
            <h2>Send Message</h2>
            <textarea id="messageContent" placeholder="Enter your message"></textarea>
            <div class="action-buttons">
                <button onclick="saveMessage()">Save</button>
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
        
        <!-- CR Profiles -->
        <div id="crProfiles" style="display:none;"></div>
        
        <!-- Bulk Message Form -->
        <div id="bulkMessageForm" class="message-form" style="display:none;">
            <h2>Bulk Message</h2>
            <textarea id="bulkMessageContent" placeholder="Enter your message for all parents"></textarea>
            <div class="action-buttons vertical">
                <button onclick="sendBulkMessage('first')">First Group (1-25)</button>
                <button onclick="sendBulkMessage('second')">Second Group (26-50)</button>
                <button onclick="sendBulkMessage('third')">Third Group (51+)</button>
            </div>
        </div>
        
        <!-- Message Logs -->
        <div id="messageLogs" class="message-logs" style="display:none;">
            <h2><i class="fas fa-comment-alt"></i> Recent Message Logs</h2>
            <div class="logs-container" id="logsContent">
                <!-- Log entries will be populated here -->
            </div>
            <button id="clearLogsBtn" class="clear-logs-btn">
                <i class="fas fa-trash"></i> Clear All Logs
            </button>
        </div>
        
        <!-- Copyright -->
        
    </div>
    
    <!-- Print Modal -->
    <div id="printModal" class="modal">
        <div class="modal-content">
            <h2>Select Date Range</h2>
            <input type="date" id="startDate">
            <input type="date" id="endDate">
            <button id="printPreviewBtn">Print Preview</button>
            <button id="closeModal">Close</button>
        </div>
    </div>
    
    <!-- Print Preview -->
    <div id="printPreview" class="print-preview">
        <div id="printContent"></div>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="bottom-navbar">
        <a href="#" class="nav-item active">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="messages.html" class="nav-item">
            <i class="fas fa-comment-alt"></i>
            <span>Messages</span>
        </a>
        <a href="students.html" class="nav-item" id="studentsBtn">
            <i class="fas fa-user-graduate"></i>
            <span>Students</span>
        </a>
        <a href="#" class="nav-item logout" id="logoutBtn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </div>
    
    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>


